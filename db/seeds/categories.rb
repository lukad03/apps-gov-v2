CATEGORY_SEEDS = {
  "Analytics and Data Science" => [
    {
      name: "Analytics and Business Intelligence",
      sub_subcategories: [
        "A/B Testing",
        "Analytics and BI Platform",
        "Mobile A/B Testing",
        "Web Analytics",
        "Mobile Analytics",
        "Session Recording and Playback",
        "Heatmaps",
        "Website Visit Counter",
        "Data Visualization",
        "Predictive Analytics",
        "Analytics Dashboard",
        "Marketing Analytics",
        "Call Tracking and Analytics",
        "Video Analytics",
        "Visitor Analytics",
        "Conversion Optimization",
        "Advertising Measurement",
        "Other BI and Analytics"
      ]
    }, {
      name: "Data Infrastructure",
      sub_subcategories: [
        "Realtime Backend",
        "Data Warehousing",
        "Big Data Infrastructure",
        "Stream Processing",
        "Master Data Management"
      ]
    }, {
      name: "Data Science",
      sub_subcategories: [
        "Data Science and Machine Learning",
        "Data Integration",
        "IoT Platform",
        "AI Platform",
        "Data Hygiene",
        "NLP and Text Analytics",
        "Data Migration",
        "Data Preparation",
        "Data API",
        "Event and Log Data Analysis",
        "Big Data Analytics"
      ]
    }
  ],
  "Customer Support and Success" => [
    {
      name: "Community",
      sub_subcategories: [
        "Community Management",
        "Expert Network",
        "Forums and Forum Software",
        "Q and A Platform"
      ]
    }, {
      name: "Support",
      sub_subcategories: [
        "Cloud Contact Center Software",
        "Cobrowsing",
        "Customer Support",
        "Customer Support Automation",
        "Customer Support Services",
        "Help Desk and Ticketing",
        "Live Chat",
        "Mobile Customer Support",
        "Other Support",
        "Remote Support",
        "Self Service Support",
        "Social Customer Support",
        "User Feedback Management",
        "Video Chat Support",
        "Video Tutorial Software",
        "Virtual Agent"
      ]
    }, {
      name: "User Engagement and Feedback",
      sub_subcategories: [
        "Customer Experience Management",
        "Customer Satisfaction Ratings",
        "Crowdsourced Feedback",
        "Feedback Analytics",
        "Forms and Surveys",
        "In-app User Feedback",
        "Online Review Management",
        "Other User Engagement and Feedback",
        "User Onboarding and Engagement"
      ]
    }
  ],
  "Developer" => [
    {
      name: "API and Developer Tools",
      sub_subcategories: [
        "API Documentation",
        "API Management",
        "API Performance Monitoring",
        "Code Search",
        "Code Quality",
        "Face Recognition API",
        "FTP and File Uploads",
        "Image Processing API",
        "Integrations Marketplace",
        "Package Manager",
        "Plumbing and Middleware",
        "Search Tools",
        "Spreadsheets as a Backend",
        "Translation",
        "Voice and Messaging API"
      ]
    }, {
      name: "Databases",
      sub_subcategories: [
        "Database Tools",
        "Graph Databases",
        "NoSQL Databases",
        "Relational Databases",
        "Time Series Databases"
      ]
    }, {
      name: "Languages and Frameworks",
      sub_subcategories: [
        "Languages",
        "Serverless Frameworks",
        "Unit Testing Frameworks",
        "Web Framework"
      ]
    }, {
      name: "Mobile Development",
      sub_subcategories: [
        "Mobile App Dev Framework",
        "Mobile App Dev Platform",
        "Mobile App Dev Tools",
        "Mobile App Testing",
        "Mobile Debugging Tools",
        "Mobile Test Automation"
      ]
    }, {
      name: "Software Development",
      sub_subcategories: [
        "Application Frameworks",
        "Application Lifecycle Management",
        "Backend as a Service",
        "Cloud IDE",
        "Cross Platform App Dev Tools",
        "CSS Preprocessor",
        "Front End Framework",
        "Game Development",
        "IDEs and Text Editors",
        "JavaScript MVC Framework",
        "JS Build Tools/Task Runners",
        "Libraries and Widgets",
        "Maps, Charts and Graphs",
        "Notifications and Alerting",
        "Other Dev Tools",
        "Queueing, Messaging and Background Processing",
        "Rapid Application Development",
        "Release Management",
        "Software Development Services",
        "Static Site Publisher",
        "Templating",
        "Version Control"
      ]
    }
  ],
  "DevOps and IT" => [
    {
      name: "Application Maintenance and Monitoring",
      sub_subcategories: [
        "Application Monitoring",
        "Application Performance Monitoring",
        "Application Status Monitoring",
        "Error and Exception Monitoring",
        "Hosted Status Pages",
        "Infrastructure Management",
        "Infrastructure Monitoring",
        "IT Financial Management",
        "IT Service Management",
        "Log Management",
        "Mobile Error and Exception Monitoring",
        "Server Monitoring",
        "Website Status Monitoring"
      ],
    }, {
      name: "Content Management System (CMS)",
      sub_subcategories: [
        "API-first CMS",
        "Blogging Platform",
        "Digital Asset Management",
        "Document Management System",
        "Enterprise Content Management",
        "Media Transcoding",
        "Mobile CMS",
        "Video CMS",
        "Web Content Management",
        "Records Management",
        "Knowledge Management",
        "Knowledge Base",
        "e-Books and Digital Publishing Software",
        "Document Workflow Automation",
        "Other CMS",
        "Comment System",
        "Media Players and Streaming Platforms"
      ]
    }, {
      name: "DevOps",
      sub_subcategories: [
        "Application Testing",
        "Browser Testing",
        "Build and Deployment Automation",
        "Bug and Issue Tracking",
        "Continuous Integration and Delivery",
        "Crowdsourced Testing",
        "DevOps Services",
        "Mobile Device Management",
        "Other DevOps",
        "Performance and Load Testing",
        "Test Automation",
        "Usability Testing"
      ]
    }, {
      name: "Hosting",
      sub_subcategories: [
        "Content Delivery Network (CDN)",
        "DNS Services",
        "Domain Management",
        "Load Balancers",
        "Web Hosting",
        "Wordpress Hosting"
      ]
    }, {
      name: "PaaS, IaaS, and Containers",
      sub_subcategories: [
        "Containers and Microservices",
        "Infrastructure as a Service (IaaS)",
        "Integrations Platform as a Service (iPaaS)",
        "Platform as a Service (PaaS)",
        "Private PaaS and IaaS"
      ]
    }, {
      name: "Security",
      sub_subcategories: [
        "Anti-Virus",
        "Auditing and Compliance",
        "Biometric Security",
        "CAPTCHA",
        "Cloud Access Security Broker",
        "Comment Spam Protection",
        "Cryptographic Key Management",
        "Data Security and DLP",
        "eDiscovery",
        "Endpoint Security",
        "Fraud Detection and Prevention",
        "Identity and Access Management",
        "Infrastructure Security",
        "IoT Security",
        "Identity Verification and Protection",
        "Governance, Risk and Compliance",
        "Malware Protection",
        "Managed Security Services",
        "Mobile App Security",
        "Network Security",
        "Other Security",
        "Password Management",
        "Perimeter Security and Firewalls",
        "Scrape Protection",
        "Secure Shell (SSH)",
        "Security Analytics",
        "SSL Certificate",
        "Threat Detection and Prevention",
        "Two Factor Authentication",
        "Unified Threat Management",
        "Virtual Private Network (VPN)",
        "Web and Mobile Application Security"
      ]
    }, {
      name: "Servers, Networks and Storage",
      sub_subcategories: [
        "Backup and Disaster Recovery",
        "Converged Infrastructure",
        "Data Management and Storage",
        "Internet Service Provider",
        "IT Infrastructure Services",
        "NAS",
        "Network Administration and Management",
        "Network Monitoring",
        "Networking Hardware",
        "Other Infrastructure Tools",
        "Server and Desktop OS",
        "Software Defined Networking",
        "Software Defined Storage",
        "Storage Infrastructure",
        "Web and Application Servers",
        "Virtualization Platform"
      ]
    }
  ],
  "Finance and Accounting" => [
    {
      name: "Accounting",
      sub_subcategories: [
        "Billing and Invoicing",
        "Bookkeeping and Accounting",
        "Accounts Payable",
        "Small Business Accounting",
        "Tax and Compliance Software",
        "Contract Management",
        "Accounting and Tax Services"
      ]
    }, {
      name: "Finance",
      sub_subcategories: [
        "Payroll Management",
        "Enterprise Resource Planning (ERP)",
        "Expense Management and Reporting",
        "Travel Expense Management",
        "Cap Table Management",
        "Business Lending",
        "Crowdfunding",
        "Bitcoin",
        "Investor Marketplace",
        "Revenue Analytics",
        "Procurement and Purchasing",
        "Financial Risk Management",
        "Personal Expense Management",
        "Financial Performance Management",
        "Mobile Banking",
        "Investment and Finance Services",
        "Other Finance and Accounting",
        "Professional Services Automation"
      ]
    }, {
      name: "Payments",
      sub_subcategories: [
        "Payments Processing",
        "POS Systems",
        "Mobile Wallet",
        "Recurring Billing and Payments",
        "Direct Carrier Billing",
        "Mobile Payments",
        "Online Payment Security"
      ]
    }
  ],
  "HR" => [
    {
      name: "Hiring",
      sub_subcategories: [
        "Talent Marketplace",
        "ATS and Recruiting",
        "Job Board",
        "Software for Job Boards",
        "Referral Recruiting",
        "Social Recruiting",
        "Digital Interview Platform",
        "Candidate Screening and Assessment",
        "Recruitment Marketing",
        "Data-Driven Recruiting",
        "Employment Backgound Checks",
        "Freelance Marketplace",
        "Engineer Recruiting",
        "Outsourced HR Services"
      ]
    }, {
      name: "Workforce Management",
      sub_subcategories: [
        "HRMS",
        "Corporate LMS and Training",
        "Human Capital Management",
        "Employee Performance Management",
        "Employee Benefits",
        "Employee Engagement",
        "Employee Rewards and Recognition",
        "Leave Management",
        "Employee Compensation",
        "Company Culture Management",
        "Employee Feedback System",
        "Goal Setting and OKRs",
        "People Analytics",
        "Employee Wellness",
        "Resource Scheduling",
        "401(K) Retirement Planning",
        "Internal Knowledgebase",
        "Workforce Optimization",
        "Contractor Workforce Management",
        "Field Service Management",
        "Employee Directory",
        "Remote Team Management",
        "Other HR Software"
      ]
    }
  ],
  "Marketing" => [
    {
      name: "Ad Tech",
      sub_subcategories: [
        "Ad Creative Management",
        "Ad Creative Services",
        "Ad Exchange",
        "Ad Exchange",
        "Ad Fraud Detection",
        "Ad Serving",
        "Ad Tech Infrastructure",
        "Advertising Optimization",
        "Application Monetization",
        "Behavioral Targeting",
        "Cross-Channel Advertising",
        "Cross-Device Targeting",
        "Data Management Platform (DMP)",
        "Demand Side Platform (DSP)",
        "Native Advertising",
        "Online Audience Data",
        "Other Ad Tech",
        "Publisher Monetization",
        "Retargeting",
        "Site Retargeting",
        "Supply Side Platform (SSP)",
        "Video Ad Platform"
      ]
    }, {
      name: "Content Marketing",
      sub_subcategories: [
        "Content Discovery Platform",
        "Content Marketing Tools",
        "Content Marketplace",
        "Copywriting and Content Writing Services",
        "Translation and Localization"
      ]
    }, {
      name: "Demand Generation",
      sub_subcategories: [
        "Account Based Marketing",
        "Affiliate Marketing",
        "Audio Marketing",
        "Channel Marketing",
        "Event Marketing and Management",
        "Gamification",
        "Lookalike Modeling",
        "Loyalty Marketing",
        "PR Marketing",
        "Promotional Marketing",
        "Referral Marketing",
        "Small Business Marketing"
      ]
    }, {
      name: "Digital Marketing",
      sub_subcategories: [
        "Attribution Tracking",
        "Audience Insights",
        "Brand Marketing",
        "Campaign Management",
        "Digital Marketing Services",
        "Digital Signage",
        "Display Advertising",
        "Local Advertising",
        "Marketing Performance Management",
        "Other Marketing Tech",
        "PR and Advertising Services",
        "Tag Management"
      ]
    }, {
      name: "Email Marketing",
      sub_subcategories: [
        "Drip Marketing",
        "Email Analytics",
        "Email Deliverability",
        "Email Marketing Automation",
        "Email Marketing Platforms",
        "Email Personalization",
        "Email Service Provider",
        "Email Tracking",
        "Email Verification",
        "Lifecycle Marketing",
        "Newsletter Marketing",
        "Other ESP",
        "Transactional Email",
      ]
    }, {
      name: "Marketing Automation",
      sub_subcategories: [
        "Cross-Channel Marketing Automation",
        "Customer Data Integration",
        "Marketing Automation Platforms",
        "Personalization",
        "Retention Marketing"
      ]
    }, {
      name: "Marketing Intelligence",
      sub_subcategories: [
        "Competitive Intelligence",
        "Market Research"
      ]
    }, {
      name: "Mobile Marketing",
      sub_subcategories: [
        "Location Data",
        "Location Marketing",
        "Mobile Ad Exchange",
        "Mobile Ad Network",
        "Mobile Advertising",
        "Mobile App Marketing",
        "Mobile Beacons",
        "Mobile DSP",
        "Mobile Marketing Automation",
        "Mobile Retargeting",
        "Push Notifications",
        "SMS Marketing"
      ]
    }, {
      name: "SEO and Search Marketing",
      sub_subcategories: [
        "Backlink Monitoring",
        "Landing Pages",
        "Reputation Management",
        "Search Marketing",
        "SEO Auditing",
        "SEO Platform",
        "Website Optimization"
      ]
    }, {
      name: "Social Media",
      sub_subcategories: [
        "Influencer Marketing",
        "Influencer Marketplace",
        "Instagram Marketing",
        "Social Advertising",
        "Social Analytics",
        "Social Login",
        "Social Marketing",
        "Social Media Data",
        "Social Media Management",
        "Social Media Monitoring",
        "Social Media Retargeting",
        "URL Shortener"
      ]
    }
  ],
  "Product and Design" => [
    {
      name: "Design",
      sub_subcategories: [
        "Mockups, Wireframing and Prototyping",
        "Collaborative Design and Prototyping",
        "Creative Design Services",
        "Design Reviews and Feedback",
        "Web Fonts and Design Assets",
        "Graphic Design Software",
        "Mobile App Builder",
        "Site Builder",
        "Website Templates",
        "Design Agencies and Services",
        "Email Design",
        "Interaction Design",
        "CAD Software",
        "Other Design Tools",
        "Design Marketplace"
      ]
    }, {
      name: "Product Management",
      sub_subcategories: [
        "Project Management",
        "Task Management",
        "Product Roadmaps",
        "Software Project Management",
        "Brainstorming and Ideation",
        "Project Portfolio Management",
        "Gantt Charts",
        "Agile Project Management",
        "Progress Reporting",
        "Kanban Boards",
        "Collaborative Calendars",
        "Time Tracking"
      ]
    }
  ],
  "Productivity and Operations" => [
    {
      name: "BPM and Workflow",
      sub_subcategories: [
        "BPM Platform"
      ]
    }, {
      name: "Collaboration",
      sub_subcategories: [
        "Internal Social Networks",
        "Collaborative Workspaces",
        "Document Collaboration",
        "Collaborative Whiteboards",
        "Team Collaboration",
        "Wikis and Discussion Spaces"
      ]
    }, {
      name: "Communications",
      sub_subcategories: [
        "Web and Video Conferencing",
        "Webinars and Webcasts",
        "Audio Conferencing",
        "Mobile Conferencing",
        "Cloud Business Telephony",
        "VoIP and SIP",
        "Screen Sharing",
        "Business Text Messaging",
        "Emergency Communications",
        "Instant Messaging",
        "Other Communications"
      ]
    }, {
      name: "Ecommerce",
      sub_subcategories: [
        "Ecommerce Platform",
        "Mobile Commerce Platform",
        "Ecommerce Marketing",
        "Ecommerce Analytics",
        "Ecommerce API",
        "Shopping Cart Software",
        "Product Recommendations",
        "Shipping and Fulfillment",
        "Order Management",
        "Product Information Management (PIM)",
        "Social Commerce",
        "Other Ecommerce"
      ]
    }, {
      name: "Email Hosting and Tools",
      sub_subcategories: [
        "Email Security",
        "Hosted Email",
        "MS Exchange Server Hosting",
        "Email Finder",
        "Email Spam Protection",
        "Email Scheduling",
        "Email Signatures",
        "Email Client",
        "Email Archiving",
        "Email Management"
      ]
    }, {
      name: "Legal",
      sub_subcategories: [
        "Legal Services",
        "Copyrights, Patents and IP Services",
        "Immigration Services"
      ]
    }, {
      name: "Operations",
      sub_subcategories: [
        "Inventory Management",
        "Partner Management",
        "Supply Chain Management",
        "Outsourced Office Management",
        "Office Operations and Management"
      ]
    }, {
      name: "Productivity",
      sub_subcategories: [
        "GTD and Personal Organizers",
        "Digital Signatures",
        "Presentations",
        "Mind Maps",
        "Office Suites",
        "File Sharing and Backup",
        "Web Clipping and Bookmarking",
        "Note Taking",
        "Web Scraping and Crawling",
        "Meeting Management",
        "Appointment Scheduling",
        "Flow Charts and Diagrams",
        "eFax Software",
        "PDF Readers and Editors",
        "RSS Readers",
        "Workflow Automation",
        "Secure Document Sharing",
        "Virtual Assistant",
        "Website Screenshots",
        "Other Productivity Tools",
        "Video Editors"
      ]
    }, {
      name: "Vertical Software",
      sub_subcategories: [
        "Retail Tech",
        "Healthcare Tech",
        "Fin Tech",
        "Other B2B Software",
        "Education Tech",
        "Other Vertical Tech",
        "Real Estate and Construction Vertical Software",
        "Restaurant and Hospitality Vertical Software",
        "Gov Tech",
        "Automobile Vertical Tech",
        "Telecom Vertical Software",
        "Energy and Utilities Vertical Software",
        "Nonprofit Vertical Software",
        "Legal Vertical Software",
        "Sports Vertical Tech",
        "Entertainment Vertical Software",
        "BioTech Vertical Software",
        "Manufacturing Vertical Software"
      ]
    }
  ],
  "Sales and BD" => [
    {
      name: "CRM",
      sub_subcategories: [
        "CRM Platforms",
        "Customer Data Enrichment",
        "Lead Capture Forms",
        "Light CRM",
        "Lead Generation",
        "Lead Lists",
        "Lead Scoring",
        "Membership Management",
        "Other CRM and Sales",
        "Salesforce Data Maintenance",
        "Small Business CRM"
      ]
    }, {
      name: "Sales",
      sub_subcategories: [
        "Configure Price Quote (CPQ) Software",
        "Outsourced Sales",
        "Sales Analytics",
        "Sales Document Tracking",
        "Sales Enablement",
        "Sales Force Automation",
        "Sales Intelligence",
        "Sales Operations Management",
        "Sales Productivity"
      ]
    }
  ]
}.freeze

def create_sub_subcategories(subcategory, sub_subcategory_names)
  sub_subcategory_names.each do |sub_subcategory_name|
    subcategory.sub_subcategories.find_or_create_by!(name: sub_subcategory_name)
  end
end

def destroy_existing_subcategories_for(category)
  category.subcategories.destroy_all
end

def destroy_existing_sub_subcategories_for(subcategory)
  subcategory.sub_subcategories.destroy_all
end

def find_or_create_categories(name)
  Category.find_or_create_by!(name: name)
end

def find_or_create_subcategories(category, subcategory)
  category.subcategories.find_or_create_by!(name: subcategory[:name])
end

def find_or_create_sub_subs(subcategory, sub_subcategories)
  sub_subcategories.each do |sub_subcategory_name|
    subcategory.sub_subcategories.find_or_create_by!(name: sub_subcategory_name)
  end
end

ActiveRecord::Base.transaction do
  CATEGORY_SEEDS.each do |name, subcategories|
    find_or_create_categories(name).tap do |category|
      destroy_existing_subcategories_for(category)
      subcategories.each do |subcategory|
        find_or_create_subcategories(category, subcategory).tap do |subcat|
          destroy_existing_sub_subcategories_for(subcat)
          find_or_create_sub_subs(subcat, subcategory[:sub_subcategories])
        end
      end
    end
  end
end
